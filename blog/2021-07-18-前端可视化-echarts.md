---
slug: 前端可视化-echarts
title: 前端可视化-echarts
author: Lin
author_title: xiaominglin789
author_url: https://github.com/xiaominglin789/lin-blog
author_image_url: https://avatars2.githubusercontent.com/u/74356262?s=400&u=51bc963a308dd3748ba5133c9cfd29eb3bc0c207&v=4
tags: [front, echarts, vue]
---

## echarts-数据可视化解决方案
将数据以图标的方式来呈现、更有效的传达数据中的信息
- 常用可视化库: echarts、d3、antV





<!--truncate-->





## echarts的简介
echarts 是一个javascript实现的开源可视化库,兼容性强,底层依赖`ZRender`.
提供 直观、交互丰富、可高度个性化定制的数据可视化图表。
- [丰富的可视化类型](https://echarts.apache.org/examples/zh/):
	+ 折线图
	+ 柱状图
	+ 饼图
	+ k线图
	+ 地图
	+ 关系图
	+ 树图
	+ 漏斗图
	+ 3D
- 多种数据格式的支持
	+ json
	+ 二维表
- 对流数据的支持(加载多少数据就呈现多少数据)





## echarts的快速入门
使用`echarts`的步骤:
- 1.引入`echarts.js`: `npm install echarts` 或 cdn
- 2.准备一个呈现图表的`标签盒子`
- 3.初始化echarts的实例对象
- 4.准备配置项 -> echarts实例
```bash
/**
  - 1.引入`echarts.js`: `npm install echarts` 或 cdn
  - 2.准备一个呈现图表的`标签盒子`
  - 3.初始化echarts的实例对象
  - 4.准备配置项 -> echarts实例 
 */
const chartsDom_1 = document.querySelector('.charts-1');
const ECharts = chartsDom_1 && echarts.init(chartsDom_1);
const echartsOptions = {
  xAxis: {
    type: 'category',
    data: ['小明','小红','小王'],
    color: ''
  },
  yAxis: {
    type: 'value'
  },
  series: [
    {
      name: '语文',
      type: 'bar',
      data: [89,65,72]
    },
  ]
};

ECharts.setOption(echartsOptions);

```
>细节:
1.`容器` 需要设置好 `宽高`
2.`echarts` 使用 `init(dom)` 初始化
3.配置参数说明:
	- xAxis: 直角坐标系x轴
	- yAxis: 直角坐标系y轴
	- series: 系列列表, 每个系列通过`type`决定自己的图表类型
		+ type: 图表类型
		+ data: 数据
4.setOption(配置项)


#### EchadrtsOptions常用配置说明:
[官方配置文档](https://echarts.apache.org/zh/option.html)

##### title
标题组件，包含主标题和副标题。
- textStyle: 主要文本文字配置
- borderWidth: 文本边框宽度,
- borderColor: 边框颜色,
- borderRadius: 边框圆角
- top: 距离顶部的偏移量
- left: 距离左边框的偏移量
- right: 距离右边框的偏移量
- bottom: 距离底部的偏移量
```bash
title: {
  text: '标题',
  subtext: '副标题'
  link: '跳转连接',
  left: 0,
  top: 0,
  right: 0,
  bottom: 0,
  textStyle: {
  	fontSize: '字体大小',
  	color: '字体颜色'
  },
  borderWidth: 3,
  borderColor: '#eee',
  borderRadius: 4
}
```

#### xAxis 水平x轴
最多能同时设置2个x轴的信息
- type: 'category' => 分列
- data: 设置每一列的名字
- name: '水平轴头的文字说明'
- show: '是否显示水平的文字信息, true/false'
```bash
# 数组设置2个x轴信息
xAxis: [{
  type: "category",
  data: ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"]
}],

# 单一设置
xAxis: {
  type: 'category',
  show: true,
  data: ['小明','小红','小王']
},
```

#### yAxis 垂直y轴
- type: 'value' => 根据`series`数据
- data: 设置每一列的名字
- name: '水平轴头的文字说明'
- show: '是否显示水平的文字信息, true/false'
```bash
yAxis: {
  type: 'value'
},
```

#### tooltip 提示组件
- trigger: 触发时机
  + `item`: 鼠标移动到每个柱子项上面时(每个图表子项)触发提示, 只会提示当前项的信息. 
            还有对 最大值、最小值、平均值进行文字信息提示.
  + `axis`: 鼠标移动到每个柱子项的y轴范围内就会触发提示,而且按照分组的一起提示。
- triggerOn: 触发的绑到事件
  + mousemove: 鼠标移过时触发
  + click: 鼠标点击时才触发
- formatter: 可以定制提示信息
```bash
formatter: function(value) {
  // console.log(value);
  // 可以根据 value 自定义提示信息
  return value.name + value.seriesName + ': ' + value.value;
},
```

#### toolbox 内置的工具栏
内置有: 导出图片、数据视图、动态类型切换、数据区域缩放、重置
- feature: 开启某项功能
  + 导出图片：saveAsImage
    + type: 'png'|'jpg'
  + 数据视图：dataView, 数据原始表格化
  + 重置：restore, 配置项还原 刷新。
  + 动态类型切换：magicType
    + type: ['line', 'bar', 'stack']
  + 数据区域缩放：dataZoom, 目前只支持直角坐标系的缩放,需要动态选择区域才能操作。
  + 还支持自定义拓展, 以 `my`开头的拓展事件
```bash
# 这样即可拥有导出图片的功能了
toolbox: {
  feature: {
    saveAsImage: {
      title: '导出图片',
    },
    dataView: {},
    magicType: {
      type: ['line', 'bar', 'stack']
    },
    dataZoom: {},
    restore: {}
    myExtEventName: {
      show: true,
      title: '事件名',
      click: function() { // 点击时触发的事件处理 }
    }
  }
}
```

#### legend 开启图例的说明
筛选系列,需要配合`series`使用,
- 使用默认,基本能解决你的需求
- 可以参考官方文档 进行 个性化的配置。
  - data的子项对应：`series`->`name`
```bash
legend: {
  data: ['语文','数学']
},
```

#### color 系列列表的不同颜色
```bash
options = {
  color: ['red', 'green'],
  series: [
    // 红色的柱子
    {
      name: '语文',
      type: 'bar',
      text: '语文',
      data: [89,65,72]
    },
    // 绿色的柱子
    {
      name: '数学',
      type: 'line',
      data: [66,35,92]
    },
  ]
};
```

#### series 系列列表,各列图表
可以控制每组数据使用不同的图表呈现
- type: 图表类型
	+ line        折线图
	+ bar         柱状图
	+ pie         饼图
	+ radar       雷达图
	+ tree        树形图
	+ candlestick k线图
	+ graph       关系图
	+ funnel      漏斗图
	+ gauge       仪表盘

- markPoint: 标记点
	+ min/max: 标记最大值、最小值
```bash
markPoint: {
  data: [
    {
      type: 'min',
      name: '最小值',
    },
    {
      type: 'max',
      name: '最大值'
    },
  ]
},
```

- markLine: 标记线
  + average: 平均线
```bash
markLine: {
	data: [
		{
			type: 'average',
			name: '平均成绩'
		}
	]
}

- label: 显示出 每个节点/柱子 的数值
	+ show: true, 控制显示
	+ color: 颜色
  + rotate: 旋转角度
  + fontSize: 字体大小
```bash
label: {
  show: true,
  rotate: 0,
  color: '#fff'
}
```

#### 上述配置的案例:
```bash
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Echarts 5 常用配置</title>
  <link href="https://cdn.bootcdn.net/ajax/libs/minireset.css/0.0.2/minireset.min.css" rel="stylesheet">
</head>
<body>
  <div class="app">
    <h3 style="width: 480px; text-align: center;">图表呈现</h3>
    <p>title标题, color图表颜色, xAxis水平轴, yAxis垂直轴, tooltip鼠标选中提示,series系列列表数据</p>
    <div class="charts-1" style="width:560px;height:360px;"></div>
  </div>

  <!-- 库 -->
  <script src="https://cdn.bootcdn.net/ajax/libs/echarts/5.1.2/echarts.common.min.js">
  </script>
  <!-- 业务 -->

  <script>
    /**
      - 1.引入`echarts.js`: `npm install echarts` 或 cdn
      - 2.准备一个呈现图表的`标签盒子`
      - 3.初始化echarts的实例对象
      - 4.准备配置项 -> echarts实例 
     */
    const chartsDom_1 = document.querySelector('.charts-1');
    const ECharts = chartsDom_1 && echarts.init(chartsDom_1);
    const echartsOptions = {
      color: ['red', 'green'],
      toolbox: {
        feature: {
          saveAsImage: {
            title: '导出图片',
          },
          dataView: {},
          magicType: {
            type: ['line', 'bar', 'stack']
          },
          dataZoom: {},
          restore: {}
        }
      },
      tooltip: {
        trigger: "item",
        triggerOn: "mousemove",
        // formatter: function(value) {
        //   // 可以根据 value 自定义提示信息
        //   return value.name + value.seriesName + ': ' + value.value;
        // },
        axisPointer: {
          type: "shadow"
        }
      },
      title: {
        text: '成绩表',
        // subtext: '学生成绩表',
        link: 'https://www.baidu.com',
        left: 'left',
        textStyle: {
          fontSize: 20,
          color: 'red'
        },
        borderWidth: 3,
        borderColor: '#eee',
        borderRadius: 4
      },
      xAxis: {
        type: 'category',
        show: true,
        data: ['小明','小红','小王']
      },
      yAxis: {
        name: '分数',
        type: 'value',
        show: true
      },
      legend: {},
      series: [
        // 红色的
        {
          name: '语文',
          type: 'bar',
          text: '语文',
          data: [89,65,72],
          markPoint: {
            data: [
              {
                type: 'min',
                name: '最小值',
              },
              {
                type: 'max',
                name: '最大值'
              },
            ]
          },
          markLine: {
            data: [
              {
                type: 'average',
                name: '平均成绩',
              }
            ]
          },
          label: {
            show: true,
            rotate: 0,
            color: '#fff'
          }
        },
        // 绿色的
        {
          name: '数学',
          type: 'bar',
          data: [66,35,92],
          label: {
            show: true
          },
          markPoint: {
            data: [
            {
              type: 'max',
            },
            {
              type: 'min',
            }
          ]},
          markLine: {
            data: [
              {
                type: 'average'
              }
            ]
          }
        },
      ]
    };

    ECharts.setOption(echartsOptions);
  </script>
</body>
</html>

```







## echarts常用的7种图表
#### 图表-柱状图
color: 图例的颜色配置数组
  - color: ['颜色代码1','颜色代码2','颜色代码3',...]
toolbox: 内置工具栏
  - feature
tooltip: 提示栏
  - trigger: 'item' | 'axis'
title: 标题配置
  - fontStyle
xAxis: x轴显示
  - type: 'category'
  - data: ['列名1','列名2','列名3',...]
yAxis: y轴显示
  - type: 'value'
legend: 图例
  + data: ['语文', ...]
series: 系列列表数据参数
  + name: '语文',
  + type: 'bar',
  + text: '语文',
  + data: [89,65,72],
  + markPoint: 提示点-最大值、最小值
    - data: [{ type:'max' }, { type: 'min' }]
  + markLine: 提示线-平均线
    - data: [{ type: 'average', name: '平均值' }]









## echarts优化方案








